# ======================================================================
# Hybrid AI Quant Pro â€“ pytest_strict.ini (Hedge-Fund Grade v6.2, Fixed)
# ----------------------------------------------------------------------
# Strict CI/CD pytest configuration
# - Runs ALL tests in /tests (not just selected files)
# - Enforces repo-wide 100% coverage
# - No warnings, maxfail=1 for stability
# ======================================================================

[pytest]
addopts =
    -v
    --strict-markers
    --disable-warnings
    --maxfail=1
    --import-mode=importlib
    --cov=hybrid_ai_trading
    --cov-branch
    --cov-config=.coveragerc
    --cov-report=term-missing
    --cov-report=html
    --cov-report=xml
    --cov-fail-under=100

# ----------------------------------------------------------------------
# Test discovery
# ----------------------------------------------------------------------
testpaths = tests
python_files = test_*.py

# ----------------------------------------------------------------------
# Custom markers
# ----------------------------------------------------------------------
markers =
    unit: mark as a fast-running unit test
    integration: mark as an integration test (API, DB, broker)
    slow: mark as a slow/heavy test (e.g., backtests, sims)
    signals: mark for trading signal tests
    risk: mark for risk management tests
    execution: mark for execution/order manager tests
    lint: mark for lint/format checks (flake8, black)
    perf: mark for performance/benchmark tests (e.g., runtime <2s)

# ----------------------------------------------------------------------
# Coverage configuration
# ----------------------------------------------------------------------
[coverage:run]
branch = True
source = src/hybrid_ai_trading

[coverage:report]
show_missing = True
skip_covered = False
fail_under = 100
