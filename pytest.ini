# ======================================================================
# Hybrid AI Quant Pro Ã¢â‚¬â€œ pytest.ini (Hedge-Fund Grade v6.2, Fixed)
# ----------------------------------------------------------------------
# Central pytest configuration
# - Collects tests in /tests, enforces importlib mode
# - Default coverage: trade_engine only (dev-friendly fast runs)
# - Local runs: reports in term/html/xml
# - CI/CD: strict mode can enforce 100% via pytest_strict.ini
# ======================================================================

[pytest]
# ----------------------------------------------------------------------
# Default options
# ----------------------------------------------------------------------
addopts =
    -ra -q
    --import-mode=importlib
    # Ã¢Å“â€¦ Focus coverage on trade_engine by default
    --cov=hybrid_ai_trading.trade_engine
    --cov-branch
    --cov-config=.coveragerc
    --cov-report=term-missing
    --cov-report=html
    --cov-report=xml
    --maxfail=1
    --disable-warnings
    # Ã°Å¸â€â€™ For CI/CD, uncomment below to enforce repo-wide AAA coverage
    # --cov=hybrid_ai_trading
    # --cov-fail-under=100

# ----------------------------------------------------------------------
# Python import path
# ----------------------------------------------------------------------
pythonpath = src

# ----------------------------------------------------------------------
# Test discovery rules
# ----------------------------------------------------------------------
testpaths = tests
python_files = test_*.py

# ----------------------------------------------------------------------
# Ignore dirs for discovery
# ----------------------------------------------------------------------
norecursedirs =
    archive
    scripts
    .venv
    .git
    __pycache__

# ----------------------------------------------------------------------
# Custom markers
# ----------------------------------------------------------------------
markers =
    unit: mark as a fast-running unit test
    integration: mark as an integration test (API, DB, broker)
    slow: mark as a slow/heavy test (e.g., backtests, sims)
    signals: mark for trading signal tests
    risk: mark for risk management tests
    execution: mark for execution/order manager tests
    lint: mark for lint/format checks (flake8, black)
    perf: mark for performance/benchmark tests (e.g., runtime <2s)
